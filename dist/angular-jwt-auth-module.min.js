!function(){angular.module("angular-jwt-auth-module",["angular-jwt","angular-jwt-auth-module.tools","angular-ws-service"]).config(["$httpProvider","jwtInterceptorProvider","angularJwtAuthToolsProvider",function(e,t,o){t.tokenGetter=["$injector","options","jwtHelper","$http","WsService",function(e,t,n,r,i){if(Array.isArray(o.ignoredUrlExtensions)&&o.ignoredUrlExtensions.length){var s=t.url.split(".");if(-1!==o.ignoredUrlExtensions.indexOf(s.pop()))return null}var u=e.invoke(o.existingTokenRetriever);return console.log("existingtoken",u),null!==u.token&&n.isTokenExpired(u.token)?r({url:o.urlTokenRefresh,skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:i.objectToURLEncoded,ignoreAuthModule:!0,method:"POST",data:{refresh_token:u.refreshToken}}).then(function(t){var n=t.data;return console.log("new token",t.data),e.invoke(o.tokenSaver,n),n.token},function(){return null}):u.token}],e.interceptors.push("jwtInterceptor")}]).run(["$injector","$rootScope","angularJwtAuthTools",function(e,t,o){t.$on("event:auth-loginConfirmed",function(t,n){e.invoke(o.tokenSaver,n)}),t.$on("event:auth-loginCancelled",function(){e.invoke(o.tokenRemover)})}]),angular.module("angular-jwt-auth-module.tools",[]).provider("angularJwtAuthTools",function(){this.urlLoginCheck="/login_check",this.urlTokenRefresh="/token/refresh",this.prefix="rrg.",this.existingTokenRetriever=function(){},this.tokenRetriever=function(){},this.tokenSaver=function(){},this.tokenRemover=function(){},this.$get=function(){return{credentialsRetriever:this.credentialsRetriever,tokenRetriever:this.tokenRetriever,existingTokenRetriever:this.existingTokenRetriever,tokenSaver:this.tokenSaver,tokenRemover:this.tokenRemover}}}).config(["angularJwtAuthToolsProvider",function(e){e.tokenSaver=function(){console.log("tokenSaverinvoke"),localStorage.setItem(this.prefix+"auth.jwt_token",this.token),localStorage.setItem(this.prefix+"auth.jwt_refresh_token",this.refresh_token)},e.existingTokenRetriever=function(){return console.log("existingtokeninvoke"),{token:localStorage.getItem(this.prefix+"auth.jwt_token"),refreshToken:localStorage.getItem(this.prefix+"auth.jwt_refresh_token")}},e.tokenRemover=function(){localStorage.removeItem(this.prefix+"auth.jwt_token"),localStorage.removeItem(this.prefix+"auth.jwt_refresh_token")},e.tokenRetriever=["$http","WsService",function(t,o){return t.post(e.urlLoginCheck,this,{ignoreAuthModule:!0,skipAuthorization:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:o.objectToURLEncoded})}]}])}();